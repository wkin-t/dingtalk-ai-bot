# OpenClaw 多 Agent 配置示例
# 复制此文件为 .env 并填入真实值

# === 钉钉机器人凭证 ===
DINGTALK_CLIENT_ID=your_client_id
DINGTALK_CLIENT_SECRET=your_client_secret
DINGTALK_CORP_ID=your_corp_id
DINGTALK_COOL_APP_CODE=your_cool_app_code

# === OpenClaw Gateway 配置 ===
OPENCLAW_HTTP_URL=http://127.0.0.1:18789/v1/chat/completions
OPENCLAW_GATEWAY_TOKEN=your_gateway_token

# === OpenClaw 多 Agent 路由配置 ===
# 钉钉群 conversationId → OpenClaw agent ID 映射
# 格式: JSON 对象字符串
#
# 如何获取 conversationId:
# 1. 在钉钉群里 @机器人 发一条消息
# 2. 查看机器人日志，找到类似 "conversation_id=cidXXXXXX" 的输出
# 3. 把 conversationId 填到下面的映射中
#
# 示例:
OPENCLAW_GROUP_AGENT_MAPPING={"cidXXX群1":"group-1","cidYYY群2":"group-2","cidZZZ群3":"group-3"}

# 默认 agent (严格模式关闭时，未映射群使用此 agent)
OPENCLAW_AGENT_ID=main
# OpenClaw 模式下透传的历史条数（建议保持较小，避免覆盖 Gateway 的 Agent 策略）
OPENCLAW_CONTEXT_MESSAGES=6

# === 严格路由模式（安全特性） ===
# 默认 true: 未在映射表中的群会被拒绝，返回错误提示
#           防止未配置群误打到默认 agent，避免隐私/隔离风险
# 设为 false: 回退到 OPENCLAW_AGENT_ID（不推荐）
OPENCLAW_STRICT_GROUP_ROUTING=true

# === AI 后端选择 ===
AI_BACKEND=openclaw

# === 钉钉 AI 卡片模板 ID ===
CARD_TEMPLATE_ID=ea2d035e-20fe-447d-9fbf-c04658772b24.schema

# === 上下文配置 ===
MAX_HISTORY_LENGTH=50
MAX_STORAGE_LENGTH=1000

# === 平台选择 ===
PLATFORM=dingtalk
