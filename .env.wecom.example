# ================= 企业微信 Gemini AI 机器人配置 =================
# 复制此文件为 .env.wecom 并填写实际值
# 部署位置: /opt/dingtalk-ai-bot/
# 服务端口: 35002
# Nginx 反向代理: https://your-domain.com/api/wecom/callback -> 127.0.0.1:35002

# 1. Google Gemini API Key
GEMINI_API_KEY=your_gemini_api_key

# 2. Gemini 模型配置
GEMINI_MODEL=gemini-3-pro-preview
ENABLE_THINKING=true
ENABLE_SEARCH=true

# 3. 钉钉配置 (可选，如果 PLATFORM=both)
DINGTALK_CLIENT_ID=your_dingtalk_client_id
DINGTALK_CLIENT_SECRET=your_dingtalk_client_secret

# 4. 企业微信机器人配置 (必填)
# 回调验签参数
WECOM_BOT_TOKEN=your_custom_token_min_3_chars
WECOM_BOT_ENCODING_AES_KEY=your_43_char_base64_encoding_aes_key
# 可选: 收包方 ID,用于严格校验 (可填企业ID/机器人receive_id，不确定时留空)
WECOM_BOT_RECEIVE_ID=
# 消息发送 Webhook (二选一)
WECOM_BOT_WEBHOOK_KEY=your_wecom_bot_webhook_key
# WECOM_BOT_WEBHOOK_URL=https://qyapi.weixin.qq.com/cgi-bin/webhook/send?key=xxx
# 机器人回包模式:
# - response_url: 主动回复（稳定，群聊不支持流式卡片）
# - passive_stream: 被动回包（支持 stream / stream_with_template_card）
WECOM_BOT_REPLY_MODE=passive_stream
# 被动流式样式（仅在 WECOM_BOT_REPLY_MODE=passive_stream 时生效）
# 可选: stream | stream_with_template_card
WECOM_BOT_STREAM_STYLE=stream_with_template_card

# 平台选择: dingtalk | wecom | both
PLATFORM=both

# 5. 代理设置 (国内服务器必填)
SOCKS_PROXY=socks5h://127.0.0.1:1080
HTTP_PROXY_URL=http://127.0.0.1:1087

# 6. AI 卡片模板 ID (钉钉使用)
CARD_TEMPLATE_ID=ea2d035e-20fe-447d-9fbf-c04658772b24.schema

# 7. 上下文配置
MAX_HISTORY_LENGTH=50
MAX_STORAGE_LENGTH=1000

# ================= 可选: 数据库配置 =================
# 如果不配置，将降级到文件存储

# Redis 配置
REDIS_HOST=127.0.0.1
REDIS_PORT=36379
REDIS_PASSWORD=
REDIS_DB=0

# MySQL 配置
MYSQL_HOST=127.0.0.1
MYSQL_PORT=33306
MYSQL_USER=root
MYSQL_PASSWORD=your_mysql_password
MYSQL_DATABASE=dingtalk_gemini
